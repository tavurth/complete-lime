function completeLime(e,t){function n(){d.scrollLeft=9e3,a.scrollLeft=d.scrollLeft}function o(e){return void 0===v&&(v=document.createElement("span"),v.style.visibility="hidden",v.style.position="fixed",v.style.outline="0",v.style.margin="0",v.style.padding="0",v.style.border="0",v.style.left="0",v.style.whiteSpace="pre",v.style.fontSize=t.fontSize,v.style.fontFamily=t.fontFamily,v.style.fontWeight="normal",document.body.appendChild(v)),v.innerHTML=String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),v.getBoundingClientRect().right}function i(e){var t=d.value;a.value=t+e.substring(t.length)}function l(){m.isTouchDevice&&d.blur(),m.onEnter("hidden"!=f.style.visibility)}function r(e){d.value!==e&&(d.value=e)}t=t||{},t.fontSize=t.fontSize||"16px",t.fontFamily=t.fontFamily||"sans-serif",t.height=t.height||"32px",t.padding=t.padding||"8px",t.promptInnerHTML=t.promptInnerHTML||"",t.color=t.color||"#333",t.hintColor=t.hintColor||"#aaa",t.backgroundColor=t.backgroundColor||"#fff",t.dropDownBorderColor=t.dropDownBorderColor||"#aaa",t.dropDownZIndex=t.dropDownZIndex||"100",t.dropDownOnHoverBackgroundColor=t.dropDownOnHoverBackgroundColor||"#ddd";var d=document.createElement("input");d.type="search",d.spellcheck=!1,d.style.fontSize=t.fontSize,d.style.fontFamily=t.fontFamily,d.style.height=t.height,d.style.padding=t.padding,d.style.color=t.color,d.style.backgroundColor=t.backgroundColor,d.style.width="100%",d.style.outline="0",d.style.border="0",d.style.margin="0",d.style.verticalAlign="middle";var a=d.cloneNode();a.tabIndex="-1",a.disabled="",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.borderColor="transparent",a.style.boxShadow="none",a.style.color=t.hintColor,d.placeholder="Enter search string",d.autofocus=!0,d.autocomplete="search",d.style.backgroundColor="transparent",d.style.position="relative";var s=document.createElement("div");s.style.position="relative",s.style.outline="0",s.style.border="0",s.style.margin="0",s.style.padding="0";var u=document.createElement("div");if(u.style.position="absolute",u.style.outline="0",u.style.margin="0",u.style.padding="0",u.style.border="0",u.style.fontSize=t.fontSize,u.style.fontFamily=t.fontFamily,u.style.color=t.color,u.style.backgroundColor=t.backgroundColor,u.style.top="0",u.style.left="0",u.style.overflow="hidden",u.innerHTML=t.promptInnerHTML,u.style.background="transparent",void 0===document.body)throw"document.body is undefined. The library was wired up incorrectly.";document.body.appendChild(u);var c=u.getBoundingClientRect().right;s.appendChild(u),u.style.visibility="visible",u.style.left="-"+c+"px",s.style.marginLeft=c+"px",s.appendChild(a),s.appendChild(d);var f=document.createElement("div");f.style.position="absolute",f.style.visibility="hidden",f.style.outline="0",f.style.margin="0",f.style.padding="0",f.style.textAlign="left",f.style.fontSize=t.fontSize,f.style.fontFamily=t.fontFamily,f.style.backgroundColor=t.backgroundColor,f.style.zIndex=t.dropDownZIndex,f.style.cursor="default",f.style.borderStyle="solid",f.style.borderWidth="1px",f.style.borderColor=t.dropDownBorderColor,f.style.overflowX="hidden",f.style.whiteSpace="pre",f.style.overflowY="auto";var y=function(e){var n=[],o=0,i=-1,l=function(e){e.style.outline="1px solid #00f"},r=function(e){e.style.outline="0"},d=function(e){a.hide(),a.onmouseselection(e.__hint)},a={hide:function(){e.style.visibility="hidden"},isHidden:function(){return"hidden"===e.style.visibility},refresh:function(i,s){e.style.visibility="hidden",o=0,e.innerHTML="";var u=window.innerHeight||document.documentElement.clientHeight,c=e.parentNode.getBoundingClientRect(),f=c.top-6,y=u-c.bottom-6;n=[];for(var p=new RegExp("^"+i,"i"),v=t.padding,h=t.padding,g=0;g<s.length;g++)if(p.test(s[g])){var m=document.createElement("div");m.style.color=t.color,m.style.lineHeight=t.height,m.style.paddingLeft=v,m.style.paddingRight=h,m.tabIndex="0",m.addEventListener("mouseover",function(){l(this)}),m.addEventListener("mouseout",function(){r(this)}),m.addEventListener("mousedown",function(){d(this)}),m.__hint=s[g],m.innerHTML=i+"<b>"+s[g].substring(i.length)+"</b>",n.push(m),e.appendChild(m)}0!==n.length&&(1!==n.length||i!==n[0].__hint)&&(a.highlight(0),f>3*y?(e.style.top="",e.style.bottom="100%"):(e.style.top="100%",e.style.bottom=""),e.style.visibility="visible")},highlight:function(e){-1!=i&&n[i]&&(n[i].style.backgroundColor=t.backgroundColor),n[e].style.backgroundColor=t.dropDownOnHoverBackgroundColor,i=e},move:function(t){return"hidden"===e.style.visibility?"":o+t===-1||o+t===n.length?n[o].__hint:(o+=t,a.highlight(o),n[o].__hint)},onmouseselection:function(){}};return a},p=y(f);p.onmouseselection=function(e){a.value=h+e,r(h+e),n(),m.onChange(d.value),g=d.value,setTimeout(function(){d.focus()},0)},s.appendChild(f),e.appendChild(s);var v,h,g,m={onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},onChange:function(){m.repaint()},abortAuto:function(){},startFrom:0,options:[],wrapper:s,input:d,hint:a,dropDown:f,prompt:u,isTouchDevice:"ontouchstart"in window,setText:function(e){a.value=e,r(e)},getText:function(){return d.value},hideDropDown:function(){p.hide()},repaint:function(){var e=d.value,t=m.startFrom,n=m.options,l=n.length,r=e.substring(t);if(h=e.substring(0,t),r.length+h.length===0)return void p.hide();a.value="";for(var s=new RegExp("^"+r,"i"),u=0;l>u;u++){var c=n[u];if(s.test(c)){i(h+c);break}}f.style.left=o(h)+"px",p.refresh(r,m.options)}},b=function(e,t){g=e.value;var n=function(){var n=e.value;g!==n&&(g=n,t(n))};e.addEventListener("input",n,!1),e.addEventListener("keyup",n,!1),e.addEventListener("change",n,!1)};b(d,function(e){m.onChange(e)});var C=function(e){var t=e.keyCode;if(33!=t&&34!=t){if(27==t)return e.preventDefault(),p.isHidden()?r(""):p.hide(),a.value=d.value,void d.focus();if(39!=t&&35!=t&&9!=t)if(13!=t){if(40==t){var o=p.move(1);return""==o&&m.onArrowDown(),i(h+o),e.preventDefault(),void e.stopPropagation()}if(38==t){var o=p.move(-1);return""==o&&m.onArrowUp(),i(h+o),e.preventDefault(),void e.stopPropagation()}a.value=""}else if(0==a.value.length)l();else{var s="hidden"==f.style.visibility;if(p.hide(),s)return a.value=d.value,d.focus(),void l();r(a.value),n();var u=g!=d.value;g=d.value,u?m.onChange(d.value):m.abortAuto()}else{if(9==t)return void m.onTab();if(a.value.length>0){p.hide(),r(a.value),n();var u=g!=d.value;g=d.value,u&&m.onChange(d.value)}}}},w=function(){setTimeout(function(){0===d.value.length&&(a.value=""),p.hide()},0)},L=function(){m.isTouchDevice||p.hide(),a.value=""},E=function(){a.scrollLeft=d.scrollLeft,a.scrollTop=d.scrollTop},k=function(){var e;return function(t){e||(e=setTimeout(function(){E(),e=null},50))}}();return d.addEventListener("blur",function(){k(),L()}),d.addEventListener("change",function(){k()}),d.addEventListener("click",function(){k(),w()}),d.addEventListener("focus",function(){k(),m.repaint()}),d.addEventListener("input",function(){k()}),d.addEventListener("keydown",function(e){k(),C(e)},!1),d.addEventListener("keyup",function(){k()}),m}
